<!DOCTYPE html>
<html>
<head>
  <script src="./jsFiles/jspsych.js"></script>
  <script src="./jsFiles/latency_funcs.js"></script> 
  <script src="./jsFiles/plugin-html-keyboard-response.js"></script>
  <script src="./jsFiles/plugin-html-slider-response.js"></script>
  <script src="./jsFiles/plugin-instructions.js"></script>
  <script src="./jsFiles/plugin-html-button-response.js"></script>
  <script src="./jsFiles/plugin-survey-likert.js"></script>
  <script src="./jsFiles/plugin-survey-multi-choice.js"></script>
  <script src="./jsFiles/plugin-survey-text.js"></script> 
  <script src="./jsFiles/plugin-survey-html-form.js"></script> 
  <script src="./jsFiles/streakgame.js"></script> 
  <link href="./css/jspsych.css" rel="stylesheet" type="text/css"></link>
  <title>Simulation</title>
</head>
<body>
  <h1>Experiment Simulation</h1>
  <p>Open the console to view simulation results.</p>
  
  <script>
    // Function to simulate the experiment
    function getNextNumber() {
      // Generate the 750ms and 250ms list (20 each)
      const list = Array(20).fill(750).concat(Array(20).fill(250));
      return list[Math.floor(Math.random() * list.length)];
    }

    function simulateExperiment(trials = 10000) {
      const outcomes = { WW: 0, WL: 0, LW: 0, LL: 0 };

      for (let i = 0; i < trials; i++) {
        const trialDuration = getNextNumber(); // 750ms or 250ms
        const randomDuration = Math.floor(Math.random() * 750); // Random outer circle activation time
        let participantActivated = trialDuration === 750; // Participant activates only in 750ms trials
        let outerCircleActivated = randomDuration < trialDuration;

        // Determine outcome
        if (participantActivated && outerCircleActivated) {
          outcomes.WW++;
        } else if (participantActivated && !outerCircleActivated) {
          outcomes.WL++;
        } else if (!participantActivated && outerCircleActivated) {
          outcomes.LW++;
        } else {
          outcomes.LL++;
        }
      }

      // Calculate percentages
      const totalTrials = trials;
      for (const key in outcomes) {
        outcomes[key] = ((outcomes[key] / totalTrials) * 100).toFixed(2) + "%";
      }

      console.log("Simulation Results:", outcomes);
      return outcomes;
    }

    // Run the simulation on page load
    document.addEventListener('DOMContentLoaded', function () {
      console.log("Running simulation...");
      simulateExperiment();
    });
  </script>
</body>
</html>


